{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6**","webpack:///webpack/bootstrap f31faf4477e10a0989b4?28e2**","webpack:///./src/util.js?ad00**","webpack:///./src/render/base.js?e587*","webpack:///./src/render/canvas.js"],"names":["getHtmlElement","getImageByUrl","supportCORS","obj","NodeList","HTMLElement","document","querySelectorAll","url","Promise","resolve","reject","img","Image","src","complete","onload","onerror","e","toArray","Array","from","toStr","Object","prototype","toString","isCallable","fn","call","toInteger","value","number","Number","isNaN","isFinite","Math","floor","abs","maxSafeInteger","pow","toLength","len","min","max","arrayLike","C","items","TypeError","mapFn","arguments","length","undefined","T","A","k","kValue","crossOrigin","normalAttributeName","name","replace","s","toLowerCase","BaseRender","image","dom","dataset","getAttribute","prefixes","module","exports","options","ratio","limit","type","angle","reverse","setText","width","height","canvas","createElement","ctx","getContext","dimensions","drawImage","imageData","getImageData","data","cb","initCanvas","unit","chunkColors","reduce","colors","cur","i","ci","push","filter","rgba","slice","every","val","source","result","rtt","key","join","count","brightness","rets","keys","map","item","sort","prev","start","end","w","w1","w2","rgb","parseInt","getMiddleRGB","o","round","_this","useColors","color","index","prefix","concat","getTextColor","target","getImageStatus","style","cssText","getBackGroundColor","getCSSGradientProperty"],"mappings":"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","file":"LoveeCanvas.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LoveeCanvas\"] = factory();\n\telse\n\t\troot[\"LoveeCanvas\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f31faf4477e10a0989b4","\n\n\n// const isArray = (arr) => {\n//   return Object.prototype.toString.call(arr) === '[object Array]';\n// };\n\nexport function getHtmlElement(obj) {\n  return obj instanceof NodeList || obj instanceof HTMLElement ? obj : document.querySelectorAll(obj);\n}\n\n\nexport function getImageByUrl(url) {\n  return new Promise((resolve, reject) => {\n    let img = new Image();\n    img.src = url;\n    if (img.complete) {\n      return resolve(img);\n    }\n    img.onload = () => {\n      resolve(img);\n    };\n    img.onerror = (e) => {\n      reject(e);\n    };\n  });\n}\n\nexport const toArray = Array.from || (function() {\n  var toStr = Object.prototype.toString;\n  var isCallable = function(fn) {\n    return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n  };\n  var toInteger = function(value) {\n    var number = Number(value);\n    if (isNaN(number)) {\n      return 0;\n    }\n    if (number === 0 || !isFinite(number)) {\n      return number;\n    }\n    return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n  };\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n  var toLength = function(value) {\n    var len = toInteger(value);\n    return Math.min(Math.max(len, 0), maxSafeInteger);\n  };\n\n    // The length property of the from method is 1.\n  return function from(arrayLike/* , mapFn, thisArg */) {\n      // 1. Let C be the this value.\n    var C = this;\n\n      // 2. Let items be ToObject(arrayLike).\n    var items = Object(arrayLike);\n\n      // 3. ReturnIfAbrupt(items).\n    if (arrayLike == null) {\n      throw new TypeError('Array.from requires an array-like object - not null or undefined');\n    }\n\n      // 4. If mapfn is undefined, then let mapping be false.\n    var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n    var T;\n    if (typeof mapFn !== 'undefined') {\n        // 5. else\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n      if (!isCallable(mapFn)) {\n        throw new TypeError('Array.from: when provided, the second argument must be a function');\n      }\n\n        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n      if (arguments.length > 2) {\n        T = arguments[2];\n      }\n    }\n\n      // 10. Let lenValue be Get(items, \"length\").\n      // 11. Let len be ToLength(lenValue).\n    var len = toLength(items.length);\n\n      // 13. If IsConstructor(C) is true, then\n      // 13. a. Let A be the result of calling the [[Construct]] internal method of C with an argument list containing the single item len.\n      // 14. a. Else, Let A be ArrayCreate(len).\n    var A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n      // 16. Let k be 0.\n    var k = 0;\n      // 17. Repeat, while k < lenâ€¦ (also steps a - h)\n    var kValue;\n    while (k < len) {\n      kValue = items[k];\n      if (mapFn) {\n        A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\n      } else {\n        A[k] = kValue;\n      }\n      k += 1;\n    }\n      // 18. Let putStatus be Put(A, \"length\", len, true).\n    A.length = len;\n      // 20. Return A.\n    return A;\n  };\n}());\n\n// function normalAttributeName(name) {\n//   return name.replace(/[A-Z]/g, (s) => {\n//     return '-' + s.toLowerCase();\n//   });\n// }\n// export function getAttribute(dom, name) {\n//   return dom.dataset ? dom.dataset[name] : dom.getAttribute('data-' + normalAttributeName(name));\n// }\n\nexport function supportCORS() {\n  let img = new Image();\n  return (img.crossOrigin !== undefined);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","'use strict';\n// var invariant = require('invariant');\nfunction normalAttributeName(name) {\n  return name.replace(/[A-Z]/g, (s) => {\n    return '-' + s.toLowerCase();\n  });\n}\nexport default class BaseRender {\n  constructor(image) {\n    this.image = image;\n  }\n  toObject() {\n\n  }\n  getAttribute(name) {\n    let dom = this.image;\n    return dom.dataset ? dom.dataset[name] : dom.getAttribute('data-' + normalAttributeName(name));\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/base.js","\n'use strict';\nimport {toArray} from '../util';\nimport BaseRender from './base';\n\nconst prefixes = ['webkit', 'moz', 'o'];\nmodule.exports = class CanvasRender extends BaseRender {\n  constructor(image, options) {\n    super(image);\n    this.ratio = this.getAttribute('ratio') || options.ratio || 0.1;\n    this.limit = this.getAttribute('limit') || options.limit || 10;\n    this.type = this.getAttribute('type') || options.type || '1';\n    this.angle = this.getAttribute('angle') || options.angle || '135deg';\n    this.reverse = this.getAttribute('reverse') || options.reverse || false;\n    this.setText = this.getAttribute('setText') || options.setText || false;\n  }\n  initCanvas() {\n    const {image, ratio} = this;\n    const width = image.width * ratio,\n      height = image.height * ratio;\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext('2d');\n    this.dimensions = {width, height};\n    this.canvas.width = width;\n    this.canvas.height = height;\n    try {\n      this.ctx.drawImage(this.image, 0, 0, width, height);\n    } catch (e) {\n      return false;\n    }\n    let imageData = this.ctx.getImageData(\n        0, 0, width, height\n    ).data;\n    this.imageData = toArray(imageData);\n    return true;\n  }\n  getImageStatus(cb) {\n    if (this.image.complete) {\n      if (this.initCanvas()) {\n        cb();\n      }\n      return;\n    }\n    this.image.onload = () => {\n      if (this.initCanvas()) {\n        cb();\n      }\n    };\n  }\n  map() {\n    const unit = 4;\n    let chunkColors = this.imageData.reduce((colors, cur, i) => {\n      const ci = Math.floor(i / unit);\n      colors[ci] = colors[ci] || [];\n      colors[ci].push(cur);\n      return colors;\n    }, []);\n    return chunkColors.filter(rgba => {\n      return rgba.slice(0, 2).every(val => val < 250) && rgba.slice(0, 2).every(val => val > 0);\n    });\n  }\n  reduce(source) {\n    let result = source.reduce((rtt, rgba) => {\n      let key = rgba.join('|');\n      if (!rtt[key]) {\n        rtt[key] = {\n          count: 0,\n          rgba: rgba,\n          brightness: ((rgba[0] * 299) + (rgba[1] * 587) + (rgba[2] * 114)) / 1000\n        };\n      }\n      rtt[key].count = (rtt[key].count + 1);\n      return rtt;\n    }, {});\n    let rets = Object.keys(result).map((item) => result[item])\n    .sort((prev, cur) => cur.count - prev.count)\n    .slice(0, this.limit);\n    return this.reverse ? rets.sort((prev, cur) => prev.brightness - cur.brightness) : rets.sort((prev, cur) => cur.brightness - prev.brightness);\n\n  }\n  getMiddleRGB(start, end) {\n    let w = 0.5 * 2 - 1;\n    let w1 = (w + 1) / 2.0;\n    let w2 = 1 - w1;\n    let rgb = [parseInt(start[0] * w1 + end[0] * w2), parseInt(start[1] * w1 + end[1] * w2), parseInt(start[2] * w1 + end[2] * w2)];\n    return rgb;\n  }\n  getTextColor(colors) {\n    let rgb = this.getMiddleRGB(colors[0].rgba.slice(0, 3), colors[colors.length - 1].rgba.slice(0, 3));\n    let o = Math.round(((parseInt(rgb[0]) * 299) + (parseInt(rgb[1]) * 587) + (parseInt(rgb[2]) * 114)) / 1000);\n    if (o > 125) {\n      return 'color: #000;';\n    } else {\n      return 'color: #fff;';\n    }\n  }\n  getCSSGradientProperty(colors) {\n    let _this = this;\n    let useColors = [colors[0], colors[colors.length - 1]];\n    const val = useColors.map((color, index) => {\n      return `rgb(${color.rgba.slice(0, 3).join(',')}) ${index == 0 ? '0%' : '75%'}`;\n    }).join(',');\n    return prefixes.map(prefix => {\n      return `background-image: -${prefix}-linear-gradient(\n                      ${_this.angle},\n                      ${val}\n                  )`;\n    }).concat([`background-image: linear-gradient(\n                  ${_this.angle},\n                  ${val}\n              )`]).join(';') + (this.setText ? this.getTextColor(colors) : '');\n  }\n  getBackGroundColor(colors) {\n    return `background-color :rgb(${colors[colors.length - 1].rgba.slice(0, 3).join(',')});` + (this.setText ? this.getTextColor(colors) : '');\n  }\n  parse(target, cb) {\n    let _this = this;\n    this.getImageStatus(() => {\n      let colors = _this.reduce(_this.map());\n      cb && cb(colors);\n      target.style.cssText += (_this.type === '0' ? _this.getBackGroundColor(colors) : _this.getCSSGradientProperty(colors));\n    });\n\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/canvas.js"],"sourceRoot":""}