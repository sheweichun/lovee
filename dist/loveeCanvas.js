!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LoveeCanvas=e():t.LoveeCanvas=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(exports,t,e){Object.defineProperty(exports,t,{configurable:!1,enumerable:!0,get:e})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=10)}([function(t,exports){"use strict";function e(t){return t instanceof NodeList||t instanceof HTMLElement?t:document.querySelectorAll(t)}function n(){var t=new Image;return void 0!==t.crossOrigin}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getHtmlElement=e,exports.supportCORS=n;exports.toArray=Array.from||function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},n=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},r=Math.pow(2,53)-1,o=function(t){var e=n(t);return Math.min(Math.max(e,0),r)};return function(t){var n=this,r=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,a=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof a){if(!e(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var u,c=o(r.length),s=e(n)?Object(new n(c)):new Array(c),f=0;f<c;)u=r[f],a?s[f]="undefined"==typeof i?a(u,f):a.call(i,u,f):s[f]=u,f+=1;return s.length=c,s}}()},function(t,exports){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(n){e(this,t),this.image=n}return r(t,[{key:"toObject",value:function(){}},{key:"getAttribute",value:function(t){var e=this.image;return e.dataset?e.dataset[t]:e.getAttribute("data-"+n(t))}}]),t}();exports.default=o},,function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=e(0),c=e(1),s=n(c),f=["webkit","moz","o"];t.exports=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.ratio=i.getAttribute("ratio")||n.ratio||.1,i.limit=i.getAttribute("limit")||n.limit||10,i.type=i.getAttribute("type")||n.type||"1",i.angle=i.getAttribute("angle")||n.angle||"135deg",i.reverse=i.getAttribute("reverse")||n.reverse||!1,i.setText=i.getAttribute("setText")||n.setText||!1,i}return i(e,t),a(e,[{key:"initCanvas",value:function(){var t=this.image,e=this.ratio,n=t.width*e,r=t.height*e;this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.dimensions={width:n,height:r},this.canvas.width=n,this.canvas.height=r;try{this.ctx.drawImage(this.image,0,0,n,r)}catch(t){return!1}var o=this.ctx.getImageData(0,0,n,r).data;return this.imageData=(0,u.toArray)(o),!0}},{key:"getImageStatus",value:function(t){var e=this;return this.image.complete?void(this.initCanvas()&&t()):void(this.image.onload=function(){e.initCanvas()&&t()})}},{key:"map",value:function(){var t=4,e=this.imageData.reduce(function(e,n,r){var o=Math.floor(r/t);return e[o]=e[o]||[],e[o].push(n),e},[]);return e.filter(function(t){return t.slice(0,2).every(function(t){return t<250})&&t.slice(0,2).every(function(t){return t>0})})}},{key:"reduce",value:function(t){var e=t.reduce(function(t,e){var n=e.join("|");return t[n]||(t[n]={count:0,rgba:e,brightness:(299*e[0]+587*e[1]+114*e[2])/1e3}),t[n].count=t[n].count+1,t},{}),n=Object.keys(e).map(function(t){return e[t]}).sort(function(t,e){return e.count-t.count}).slice(0,this.limit);return this.reverse?n.sort(function(t,e){return t.brightness-e.brightness}):n.sort(function(t,e){return e.brightness-t.brightness})}},{key:"getMiddleRGB",value:function(t,e){var n=0,r=(n+1)/2,o=1-r,i=[parseInt(t[0]*r+e[0]*o),parseInt(t[1]*r+e[1]*o),parseInt(t[2]*r+e[2]*o)];return i}},{key:"getTextColor",value:function(t){var e=this.getMiddleRGB(t[0].rgba.slice(0,3),t[t.length-1].rgba.slice(0,3)),n=Math.round((299*parseInt(e[0])+587*parseInt(e[1])+114*parseInt(e[2]))/1e3);return n>125?"color: #000;":"color: #fff;"}},{key:"getCSSGradientProperty",value:function(t){var e=this,n=[t[0],t[t.length-1]],r=n.map(function(t,e){return"rgb("+t.rgba.slice(0,3).join(",")+") "+(0==e?"0%":"75%")}).join(",");return f.map(function(t){return"background-image: -"+t+"-linear-gradient(\n                      "+e.angle+",\n                      "+r+"\n                  )"}).concat(["background-image: linear-gradient(\n                  "+e.angle+",\n                  "+r+"\n              )"]).join(";")+(this.setText?this.getTextColor(t):"")}},{key:"getBackGroundColor",value:function(t){return"background-color :rgb("+t[t.length-1].rgba.slice(0,3).join(",")+");"+(this.setText?this.getTextColor(t):"")}},{key:"parse",value:function(t,e){var n=this;this.getImageStatus(function(){var r=n.reduce(n.map());e&&e(r),t.style.cssText+="0"===n.type?n.getBackGroundColor(r):n.getCSSGradientProperty(r)})}}]),e}(s.default)},,,,,,,function(t,exports,e){t.exports=e(3)}])});